KISSY.add("app/views/manage/item/item_list",function(t,e,a,i,s,n){var l=i.all;return function(t){return t.prototype.template='<div class=table-container id=J_item_list> <div class="wrap-hd clearfix"> <div class=title-bar> <h2 class=title>\u5185\u5bb9\u7ba1\u7406</h2> </div> </div> <div class=table-head-fix> <div class="toolbar clearfix"> <a href="#!/manage/item/item_promo" class="btn btn-size25">\u65b0\u589e\u5185\u5bb9</a> </div> <table class=table> <thead> <tr {{^list}}class=no-data{{/list}}> <th class=left width="20%">\u5185\u5bb9\u6807\u9898</th> <th class=left width="10%">\u5185\u5bb9ID</th> <th class=left width="40%">URL\u5730\u5740</th> <th class=left width="10%">\u5ba1\u6838\u72b6\u6001</th> <th class=center width="20%">\u64cd\u4f5c</th> </tr> </thead> </table> </div> <table class=table bx-name="tables" bx-tmpl="list" bx-datakey="list"> <tbody> {{#list}} <tr> <td class=left width="20%">{{title}}</td> <td class=left width="10%">{{id}}</td> <td class=left width="40%"> <a href="{{link}}" target=_blank>{{link}}</a> </td> <td class=left width="10%">{{{list_status}}}</td> <td class=center width="20%"> <p class=operation> <a href="#!/manage/item/item_promo?id={{id}}">\u7f16\u8f91</a> <span class=divide>|</span> <a href="#" mx-click="del{id:{{id}}}">\u5220\u9664</a> </p> </td> </tr> {{/list}} {{^list}} <tr class=none> <td colspan=5>\u6682\u65e0\u6570\u636e</td> </tr> {{/list}} </tbody> </table> <div class=tfoot> <div id=J_item_pagination bx-name="pagination" class="pagination weibo-items" bx-config="{count:{{pageCount}},index:{{pageNo}},size:{{pageSize}},sizes:[10],simplify:true,statistics:true,sizeChange:true,jump:true,goTo:false}"> </div> </div>',t}(e.extend({locationChange:function(){this.render()},render:function(){var e=this,i=e.location,s=t.clone(i.params);s.page=s.page?s.page:1,s.perpage=s.perpage?s.perpage:10,t.mix(s,{bizType:bizType}),e.manage(a.fetchAll([{name:"content_list",urlParams:s}],function(t,a){var i=a.get("data").result,n=i.list;e.setViewPagelet({list:n,pageCount:i.paginator.total,pageNo:s.page,pageSize:s.perpage},function(){e.components()},function(){var t={pageNo:s.page,pageSize:s.perpage,pageCount:i.paginator.total};e.resetPage(t)})}))},components:function(){var t=this,e=t.getManaged("pagelet");new n({el:l("#J_item_list")});var a=e.getBrick("J_item_pagination");a&&(a.on("gotoPage",function(e){t.navigate("page="+e.index)}),a.on("sizeChange",function(e){t.navigate("page=1&perpage="+e.size)}))},resetPage:function(e){var a=this,i=a.getManaged("pagelet"),s=i.getBrick("J_item_pagination"),n={};s&&(s.get("index")!=e.pageNo&&(n.index=e.pageNo),s.get("size")!=e.pageSize&&(n.size=e.pageSize),s.get("count")!=e.pageCount&&(n.count=e.pageCount),t.isEmptyObject(n)||s.setConfig(n))},"del<click>":function(t){t.halt();var e=this,i=l("#"+t.currentId),n=i.parent("tr").offset().top,o=s.getDefaultDialogConfig({width:300,top:n}),r="app/views/util/confirm",c={confirmFn:function(){e.manage(a.fetchAll([{name:"delete_item",type:"post",postParams:{id:t.params.id,bizType:bizType}}],function(t,a){var i=a.get("data");i.status?(s.hideDialog(),e.render()):s.showGlobalTip(i.message)}),function(){})},cancelFn:function(){s.hideDialog()},confirmTitle:"\u5220\u9664\u5185\u5bb9",confirmContent:"\u60a8\u786e\u5b9a\u8981\u5220\u9664\u6b64\u5185\u5bb9\u5417\uff1f"};s.showDialog(o,r,c)},renderer:{list:{status:function(){switch(this.status){case 0:return'<span class="color-orange">\u8349\u7a3f</span>';case 1:return'<span class="color-orange">\u5ba1\u6838\u4e2d</span>';case 2:return'<div class="table-more"><span class="color-red">\u5ba1\u6838\u62d2\u7edd</span><i class="icon-horn-tilt"></i><span class="table-info">'+this.refuseReason+"</span></div>";case 3:return'<span class="color-green">\u5ba1\u6838\u901a\u8fc7</span>';case 4:return'<div class="table-more"><span class="color-red">\u8fd0\u8425\u4e0b\u7ebf</span><i class="icon-horn-tilt"></i><span class="table-info">'+this.refuseReason+"</span></div>"}}}}}))},{requires:["mxext/view","app/models/modelmanager","node","app/util/util","components/fixed_head/index"]});