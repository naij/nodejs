KISSY.add("app/views/manage/jifen/detail",function(a,t,e,s,n,i){var l=s.all;return function(a){return a.prototype.template='<div class=jifen-container> <div class=jifen-nav> <div class=left> <ul class=float> <li> <a href="#!/manage/jifen/my">\u6211\u7684\u79ef\u5206</a> </li> <li class=current> <a href="#!/manage/jifen/detail">\u79ef\u5206\u660e\u7ec6</a> </li> </ul> </div> <div class=right> <ul class=float> <li>\u6765\u6e90\uff1a{{source}}</li> <li>\u7ad9\u70b9\uff1a{{sitename}}</li> </ul> </div> </div> <div class=srch-bar> <form class=J_Form> <span>\u4e70\u5bb6\u6df7\u6dc6Nick</span><input value="{{nick}}" class=J_Nick maxlength=70> <span>\u6765\u6e90</span><input value="{{reason}}" class=J_ID> <span>\u79ef\u5206\u53d1\u653e\u65f6\u95f4</span><input value="{{time}}" class=J_Calendar> <a class="srch-btn btn" mx-click=search>\u641c\u7d22</a> <a class="btn J_export" data-href="/sitemanager/manage/points/historyDump.htm?" href="/sitemanager/manage/points/historyDump.htm?" style="margin-left: 10px;">\u5bfc\u51fa</a> </form> </div> <div class="table-content table-container"> <table class=table> <thead> <tr {{^list}}class=no-data{{/list}}> <th class=left width="10%">\u79ef\u5206ID</th> <th class=left width="20%">\u4e70\u5bb6\u6df7\u6dc6Nick</th> <th class=left width="15%">\u6765\u6e90</th> <th class=left width="15%">\u53d1\u653e\u65f6\u95f4</th> <th class=left width="15%">\u53d1\u653e\u79ef\u5206</th> <th class=left width="25%">\u5907\u6ce8</th> </tr> </thead> </table> <table class=table bx-name="tables" bx-tmpl="list" bx-datakey="list"> <tbody> {{#list}} <tr> <td width="10%" class=left class=jifen-id id="{{id}}">{{id}}</td> <td width="20%" class="left td-MixNick" title="{{userMixedNick}}">{{userMixedNick}}</td> <td width="15%" class=left>{{reason}}</td> <td width="15%" class=left>{{gmtCreate}}</td> <td width="15%" class=left>{{{list_status}}}</td> <td width="25%" class="left td-MixNick" title="{{memo}}">{{memo}}</td> </tr> {{/list}} {{^list}} <tr class=none> <td colspan=8>\u6682\u65e0\u6570\u636e</td> </tr> {{/list}} </tbody> </table> <div class=tfoot> <div id=J_item_pagination class="pagination weibo-items"> <div class=pagination-info> <span>\u5f53\u524d</span><span class=b>0-0</span><span>\u6761</span> <span class=mr>\u5171</span><span class="b totalItem">{{totalItem}}</span><span>\u6761</span> <span class=mr>\u6bcf\u9875\u5c55\u73b0</span> <div class=dropdown tabindex=0><span class=dropdown-hd><span class=dropdown-text value=0>10</span></span> </div> <span>\u6761</span></div> <div class=pagination-pages> <div class=pagination-page><span class=page-simply>{{currentPage}}/{{totalPage}}</span></div> <div class=pagination-count><span>\u5171</span><span class="b totalPage">{{totalPage}}</span><span>\u9875</span></div> <div class=pagination-form> <span>\u5411\u7b2c</span><input class=page-num value="{{currentPage}}" name=page type=text><span>\u9875</span> <a class="btn-jump btn btn-size25" mx-click=jump>\u8df3\u8f6c</a> </div> </div> </div> </div> </div> </div>',a}(t.extend({locationChange:function(){this.render()},render:function(t){var s,n=this,i=n.location;t?s=t:(s=a.clone(i.params),s.pageNum=s.pageNum?s.pageNum:1,s.nick=s.nick?s.nick:"",s.reason=s.reason?s.reason:"",s.time=s.time?s.time:""),a.mix(s,{bizType:bizType,pageSize:10}),n.manage(e.fetchAll([{name:"jifen_detail_list",urlParams:s}],function(a,t){var e=t.get("data").result,i=e.list;n.setViewPagelet({source:e.source,sitename:e.siteName,list:i,totalPage:e.totalPage,currentPage:e.currentPage,nick:decodeURI(s.nick),reason:decodeURI(s.reason),time:s.time},function(){n.components()},function(){}),l("#J_item_pagination").one(".page-simply").html(e.currentPage+"/"+e.totalPage),l("#J_item_pagination").one(".totalPage").html(e.totalPage),l("#J_item_pagination").one(".totalItem").html(e.totalItem),l("#J_item_pagination").one(".page-num").val(e.currentPage);var c=10*(parseInt(e.currentPage)-1),r=c+e.list.length;l("#J_item_pagination").one(".b").html(c+"-"+r)}))},components:function(){var t=this,e=l(".J_export").attr("href")+encodeURI(a.param(t.location.params));l(".J_export").attr("href",e),a.each(l(".J_Calendar"),function(a){var t=new i({trigger:a,align:{points:["bl","tl"],offset:[0,0]},popup:!0,triggerType:["click"]});t.on("select",function(e){t.hide();var s=i.Date.format(e.date,"yyyy-mm-dd");l(a).val(s)})})},search:function(a){var t=this,e=l(".J_Calendar").val(),s=l(".J_Nick").val(),n=l(".J_ID").val()?l(".J_ID").val():"",a=a,i=l(".J_export").attr("data-href")+"time="+e+"&reason="+encodeURI(n)+"&nick="+encodeURI(s)+"&pageNum="+a+"&bizType="+bizType;l(".J_export").attr("href",i),t.render({pageNum:a,nick:encodeURI(s),reason:encodeURI(n),time:e})},"search<click>":function(a){a.halt(),this.search(1)},"jump<click>":function(a){a.halt();var t=parseInt(l(".page-num").val()),e=parseInt(l("#J_item_pagination").one(".totalPage").html());t&&0/0!=t&&(0>=t||t>e||(l("#J_item_pagination").one(".page-simply").html(t+"/"+e),this.search(t)))},renderer:{list:{status:function(){switch(parseInt(this.number)>=0){case!0:return this.number;case!1:return'<span class="red">'+this.number+"</span>"}}}}}))},{requires:["mxext/view","app/models/modelmanager","node","app/util/util","brix/gallery/calendar/"]});