KISSY.add("app/views/manage/report/report_personality",function(t,e,a,i,n,s,l,d,r){var o=s.all;return function(t){return t.prototype.template='<div class=table-container id=J_item_list> <div class=table-head-fix> <div class="toolbar clearfix" bx-tmpl="query" bx-datakey="query"> {{#query}} <a href="#" class=btn id=J_calendar> {{start}} \u81f3 {{end}} </a> <div class="btn table-settings" id=J_download> <a class=iconfont href="/sitemanager/statistics/custom/download.htm?start={{start}}&end={{end}}">&#320;\u4e0b\u8f7d\u62a5\u8868</a> </div> {{/query}} </div> <table class=table bx-tmpl="sort" bx-datakey="list"> <thead> <tr {{^list}}class=no-data{{/list}}> <th class=left width="10%">\u65f6\u95f4</th> <th class=left width="20%">\u57df\u540d</th> <th class=left width="15%">\u81ea\u5b9a\u4e49A</th> <th class=left width="15%">\u81ea\u5b9a\u4e49B</th> <th class=left width="10%">\u70b9\u51fb\u6570</th> <th class=left width="10%">\u6210\u4ea4\u7b14\u6570</th> <th class=right width="10%">\u6210\u4ea4\u91d1\u989d</th> <th class=right width="10%">\u9884\u4f30\u6536\u5165</th> </tr> </thead> </table> </div> <table class=table bx-name="tables" bx-tmpl="list" bx-datakey="list"> <tbody> {{#list}} <tr> <td class=left width="10%">{{date}}</td> <td class=left width="20%">{{domain}}</td> <td class=left width="15%">{{field1}}</td> <td class=left width="15%">{{field2}}</td> <td class=left width="10%">{{click}}</td> <td class=left width="10%">{{dealCount}}</td> <td class=right width="10%">\uffe5{{dealMoney}}</td> <td class=right width="10%">\uffe5{{expectIncome}}</td> </tr> {{/list}} {{^list}} <tr class=none> <td colspan=7>\u5bf9\u4e0d\u8d77\uff0c\u60a8\u8fd8\u6ca1\u6709\u4e2a\u6027\u7edf\u8ba1\u6570\u636e\u3002</td> </tr> {{/list}} </tbody> </table> <div class=tfoot> <div id=J_item_pagination bx-name="pagination" class=pagination bx-config="{count:{{pageCount}},index:{{pageNo}},size:{{pageSize}},sizes:[10],simplify:true,statistics:true,sizeChange:true,jump:true,goTo:false}"> </div> </div>',t}(e.extend({locationChange:function(){this.render()},render:function(){var e=this,i=e.location,n=d.Date,s=t.clone(i.params),l=e.showdate(-7,new Date);s.start=s.start?s.start:n.format(l,"isoDate"),s.end=s.end?s.end:n.format(new Date,"isoDate"),s.page=s.page?s.page:1,s.perpage=s.perpage?s.perpage:10,t.mix(s,{bizType:bizType}),e.manage(a.fetchAll([{name:"personolity_list",urlParams:s}],function(t,a){var i=a.get("data").result;e.setViewPagelet({list:i.list,query:i.query,pageCount:i.paginator.total,pageNo:s.page,pageSize:s.perpage},function(){e.components()},function(){var t={pageNo:s.page,pageSize:s.perpage,pageCount:site.paginator.total};e.resetPage(t)})}))},components:function(){var e=this,a=e.location,i=e.getManaged("pagelet"),n=t.clone(a.params);n.start=n.start?n.start:e.showdate(-7,new Date),n.end=n.end?n.end:new Date;var s=d.Date,l=s.format(n.start,"isoDate"),g=s.format(n.end,"isoDate"),p=new d({minDate:e.showdate(-90,new Date),maxDate:new Date,trigger:"#J_calendar",align:{points:["bl","tl"],offset:[0,0]},pages:2,rangeSelect:!0,popup:!0,triggerType:["click"],range:{start:new Date(new Date(l.replace(/-/g,"/"))),end:new Date(new Date(g.replace(/-/g,"/")))},autoRender:!1});p.on("rangeSelect",function(t){p.hide();var a=d.Date.format(t.start,"yyyy-mm-dd"),i=d.Date.format(t.end,"yyyy-mm-dd");o("#J_calendar").text(a+" \u81f3 "+i),e.navigate("start="+a),e.navigate("end="+i)}),new r({el:o("#J_item_list")});var c=i.getBrick("J_item_pagination");c&&(c.on("gotoPage",function(t){e.navigate("page="+t.index)}),c.on("sizeChange",function(t){e.navigate("page=1&perpage="+t.size)}))},showdate:function(t,e){var a=new Date(e-0+864e5*t);return a=a.getFullYear()+"/"+(a.getMonth()+1)+"/"+a.getDate(),new Date(a)},resetPage:function(e){var a=this,i=a.getManaged("pagelet"),n=i.getBrick("J_item_pagination"),s={};n&&(n.get("index")!=e.pageNo&&(s.index=e.pageNo),n.get("size")!=e.pageSize&&(s.size=e.pageSize),n.get("count")!=e.pageCount&&(s.count=e.pageCount),t.isEmptyObject(s)||n.setConfig(s))}}))},{requires:["mxext/view","app/models/modelmanager","magix/vom","magix/router","node","app/util/util","brix/gallery/calendar/","components/fixed_head/index"]});